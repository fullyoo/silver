<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>포토갤러리</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Noto Sans KR', sans-serif;
            background-color: #f5f5f5;
            padding: 20px;
        }

        .gallery-wrap {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            padding: 40px;
            border-radius: 10px;
        }

        h2 {
            font-size: 28px;
            margin-bottom: 30px;
            color: #333;
        }

        /* 검색 영역 */
        .search-all {
            margin-bottom: 30px;
        }

        .search-box {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        .search-input-wrapper {
            display: flex;
            flex: 1;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            overflow: hidden;
        }

        .search-select-wrapper {
            position: relative;
            border-right: 1px solid #e0e0e0;
        }

        .search-select-button {
            padding: 12px 20px;
            background: white;
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 10px;
            min-width: 100px;
            font-size: 14px;
        }

        .search-select-button.active {
            background: #f8f8f8;
        }

        .arrow {
            font-size: 10px;
            transition: transform 0.3s;
        }

        .search-select-button.active .arrow {
            transform: rotate(180deg);
        }

        .search-options {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: white;
            border: 2px solid #e0e0e0;
            border-top: none;
            border-radius: 0 0 8px 8px;
            display: none;
            z-index: 10;
        }

        .search-options.active {
            display: block;
        }

        .search-option {
            padding: 12px 20px;
            cursor: pointer;
            transition: background 0.2s;
        }

        .search-option:hover {
            background: #f8f8f8;
        }

        .search-option.selected {
            background: #e3f2fd;
            color: #1976d2;
            font-weight: 500;
        }

        #searchInput {
            flex: 1;
            padding: 12px 20px;
            border: none;
            outline: none;
            font-size: 14px;
        }

        .search-box button {
            padding: 12px 30px;
            background: #1976d2;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: background 0.3s;
        }

        .search-box button:hover {
            background: #1565c0;
        }

        .result-info {
            color: #666;
            font-size: 14px;
            margin-bottom: 15px;
        }

        .no-results {
            text-align: center;
            padding: 60px 20px;
        }

        .no-results h3 {
            font-size: 20px;
            color: #333;
            margin-bottom: 10px;
        }

        .no-results p {
            color: #666;
            font-size: 14px;
        }

        .highlight {
            background: #fff176;
            padding: 2px 4px;
            border-radius: 3px;
        }

        /* 갤러리 그리드 */
        .gallery-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 30px;
            margin-bottom: 40px;
        }

        .gallery-item {
            display: none;
            flex-direction: column;
            background: white;
            border: 1px solid #e0e0e0;
            border-radius: 10px;
            overflow: hidden;
            transition: transform 0.3s, box-shadow 0.3s;
            cursor: pointer;
        }

        .gallery-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
        }

        .gallery-image {
            width: 100%;
            height: 250px;
            overflow: hidden;
            background: #f0f0f0;
        }

        .gallery-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.3s;
        }

        .gallery-item:hover .gallery-image img {
            transform: scale(1.1);
        }

        .gallery-info {
            padding: 20px;
        }

        .gallery-title {
            font-size: 16px;
            font-weight: 500;
            color: #333;
            margin-bottom: 10px;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        .gallery-date {
            font-size: 13px;
            color: #999;
        }

        /* 페이징 */
        .pagination {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            margin-top: 40px;
        }

        .pagination-buttons {
            display: flex;
            gap: 5px;
            align-items: center;
        }

        .pagination button {
            padding: 8px 15px;
            border: 1px solid #e0e0e0;
            background: white;
            color: #666;
            cursor: pointer;
            border-radius: 5px;
            font-size: 14px;
            transition: all 0.3s;
        }

        .pagination button:hover:not(:disabled) {
            background: #f5f5f5;
            border-color: #1976d2;
            color: #1976d2;
        }

        .pagination button.active {
            background: #1976d2;
            color: white;
            border-color: #1976d2;
        }

        .pagination button:disabled {
            opacity: 0.3;
            cursor: not-allowed;
        }

        .page-dots {
            padding: 0 5px;
            color: #999;
        }

        .page-info {
            color: #666;
            font-size: 14px;
        }

        /* 반응형 */
        @media (max-width: 968px) {
            .gallery-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 20px;
            }
        }

        @media (max-width: 640px) {
            .gallery-wrap {
                padding: 20px;
            }

            .gallery-grid {
                grid-template-columns: 1fr;
                gap: 20px;
            }

            .search-box {
                flex-direction: column;
            }

            .search-input-wrapper {
                width: 100%;
            }
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
    </style>
</head>

<body>
    <section class="gallery-wrap">
        <h2>포토갤러리</h2>
        <div class="search-all">
            <div class="search-box">
                <div class="search-input-wrapper">
                    <div class="search-select-wrapper">
                        <div class="search-select-button" onclick="toggleSearchOptions()">
                            <span id="selectedSearchType">전체</span>
                            <span class="arrow">▼</span>
                        </div>
                        <div class="search-options" id="searchOptions">
                            <div class="search-option selected" onclick="selectSearchType('all', '전체')">전체</div>
                            <div class="search-option" onclick="selectSearchType('title', '제목')">제목</div>
                        </div>
                    </div>
                    <input type="text" id="searchInput" placeholder="검색어를 입력하세요" onkeyup="handleSearch(event)">
                </div>
                <button onclick="performSearch()">검색</button>
            </div>
            <div class="result-info" id="resultInfo"></div>
        </div>

        <!-- 갤러리 그리드 -->
        <div class="gallery-grid" id="galleryGrid">
            <div class="gallery-item">
                <div class="gallery-image">
                    <img src="https://images.unsplash.com/photo-1544005313-94ddf0286df2?w=400" alt="어르신 건강체조 프로그램">
                </div>
                <div class="gallery-info">
                    <div class="gallery-title">어르신 건강체조 프로그램</div>
                    <div class="gallery-date">2025.11.08</div>
                </div>
            </div>

            <div class="gallery-item">
                <div class="gallery-image">
                    <img src="https://images.unsplash.com/photo-1581579438747-1dc8d17bbce4?w=400" alt="가을 나들이 행사">
                </div>
                <div class="gallery-info">
                    <div class="gallery-title">가을 나들이 행사</div>
                    <div class="gallery-date">2025.11.01</div>
                </div>
            </div>

            <div class="gallery-item">
                <div class="gallery-image">
                    <img src="https://images.unsplash.com/photo-1576091160399-112ba8d25d1d?w=400" alt="요리 교실 활동">
                </div>
                <div class="gallery-info">
                    <div class="gallery-title">요리 교실 활동</div>
                    <div class="gallery-date">2025.10.25</div>
                </div>
            </div>

            <div class="gallery-item">
                <div class="gallery-image">
                    <img src="https://images.unsplash.com/photo-1517457373958-b7bdd4587205?w=400" alt="미술 치료 프로그램">
                </div>
                <div class="gallery-info">
                    <div class="gallery-title">미술 치료 프로그램</div>
                    <div class="gallery-date">2025.10.18</div>
                </div>
            </div>

            <div class="gallery-item">
                <div class="gallery-image">
                    <img src="https://images.unsplash.com/photo-1516589178581-6cd7833ae3b2?w=400" alt="음악 감상회">
                </div>
                <div class="gallery-info">
                    <div class="gallery-title">음악 감상회</div>
                    <div class="gallery-date">2025.10.10</div>
                </div>
            </div>

            <div class="gallery-item">
                <div class="gallery-image">
                    <img src="https://images.unsplash.com/photo-1511632765486-a01980e01a18?w=400" alt="추석 명절 행사">
                </div>
                <div class="gallery-info">
                    <div class="gallery-title">추석 명절 행사</div>
                    <div class="gallery-date">2025.09.28</div>
                </div>
            </div>

            <div class="gallery-item">
                <div class="gallery-image">
                    <img src="https://images.unsplash.com/photo-1573496359142-b8d87734a5a2?w=400" alt="원예 치료 활동">
                </div>
                <div class="gallery-info">
                    <div class="gallery-title">원예 치료 활동</div>
                    <div class="gallery-date">2025.09.15</div>
                </div>
            </div>

            <div class="gallery-item">
                <div class="gallery-image">
                    <img src="https://images.unsplash.com/photo-1529390079861-591de354faf5?w=400" alt="생신 축하 행사">
                </div>
                <div class="gallery-info">
                    <div class="gallery-title">생신 축하 행사</div>
                    <div class="gallery-date">2025.09.05</div>
                </div>
            </div>

            <div class="gallery-item">
                <div class="gallery-image">
                    <img src="https://images.unsplash.com/photo-1593113646773-028c64a8f1b8?w=400" alt="자원봉사자와 함께">
                </div>
                <div class="gallery-info">
                    <div class="gallery-title">자원봉사자와 함께</div>
                    <div class="gallery-date">2025.08.22</div>
                </div>
            </div>

            <div class="gallery-item">
                <div class="gallery-image">
                    <img src="https://images.unsplash.com/photo-1609619385002-f40f7ae6c74c?w=400" alt="여름 물놀이 행사">
                </div>
                <div class="gallery-info">
                    <div class="gallery-title">여름 물놀이 행사</div>
                    <div class="gallery-date">2025.08.10</div>
                </div>
            </div>

            <div class="gallery-item">
                <div class="gallery-image">
                    <img src="https://images.unsplash.com/photo-1522202176988-66273c2fd55f?w=400" alt="세대공감 프로그램">
                </div>
                <div class="gallery-info">
                    <div class="gallery-title">세대공감 프로그램</div>
                    <div class="gallery-date">2025.07.28</div>
                </div>
            </div>

            <div class="gallery-item">
                <div class="gallery-image">
                    <img src="https://images.unsplash.com/photo-1509099836639-18ba1795216d?w=400" alt="전통 문화 체험">
                </div>
                <div class="gallery-info">
                    <div class="gallery-title">전통 문화 체험</div>
                    <div class="gallery-date">2025.07.15</div>
                </div>
            </div>
        </div>

        <!-- 페이징 -->
        <div class="pagination">
            <div class="pagination-buttons" id="pagination"></div>
            <div class="page-info" id="pageInfo"></div>
        </div>
    </section>

    <script>
        const itemsPerPage = 9; // 한 페이지에 9개 (3x3)
        let currentPage = 1;
        let allItems = [];
        let filteredItems = [];
        let currentSearchType = 'all';

        function initializeGallery() {
            allItems = Array.from(document.querySelectorAll('.gallery-item'));
            filteredItems = [...allItems];
            updatePagination();
            showPage(1, false);

            // 외부 클릭 시 셀렉트 박스 닫기
            document.addEventListener('click', function (event) {
                const selectWrapper = document.querySelector('.search-select-wrapper');
                const searchOptions = document.getElementById('searchOptions');
                const selectButton = document.querySelector('.search-select-button');

                if (selectWrapper && !selectWrapper.contains(event.target)) {
                    searchOptions.classList.remove('active');
                    selectButton.classList.remove('active');
                }
            });
        }

        function toggleSearchOptions() {
            event.stopPropagation();
            const searchOptions = document.getElementById('searchOptions');
            const button = document.querySelector('.search-select-button');
            searchOptions.classList.toggle('active');
            button.classList.toggle('active');
        }

        function selectSearchType(type, text) {
            event.stopPropagation();
            currentSearchType = type;
            document.getElementById('selectedSearchType').textContent = text;

            // 모든 옵션의 selected 클래스 제거
            document.querySelectorAll('.search-option').forEach(option => {
                option.classList.remove('selected');
            });

            // 클릭한 옵션에 selected 클래스 추가
            event.target.classList.add('selected');

            // 셀렉트 박스 닫기
            document.getElementById('searchOptions').classList.remove('active');
            document.querySelector('.search-select-button').classList.remove('active');
        }

        function performSearch() {
            const searchInput = document.getElementById('searchInput');
            const searchTerm = searchInput.value.toLowerCase().trim();
            const galleryGrid = document.getElementById('galleryGrid');

            if (searchTerm === '') {
                filteredItems = [...allItems];
                document.getElementById('resultInfo').textContent = '';
                galleryGrid.style.display = 'grid';
                // 하이라이트 제거
                allItems.forEach(item => {
                    const titleElement = item.querySelector('.gallery-title');
                    titleElement.innerHTML = titleElement.textContent;
                });
            } else {
                filteredItems = allItems.filter(item => {
                    const title = item.querySelector('.gallery-title').textContent.toLowerCase();
                    const date = item.querySelector('.gallery-date').textContent.toLowerCase();

                    switch (currentSearchType) {
                        case 'title':
                            return title.includes(searchTerm);
                        case 'all':
                        default:
                            return title.includes(searchTerm) || date.includes(searchTerm);
                    }
                });

                highlightSearchTerm(searchTerm);

                const searchTypeText = document.getElementById('selectedSearchType').textContent;
                if (filteredItems.length === 0) {
                    galleryGrid.style.display = 'none';
                    document.getElementById('resultInfo').innerHTML = `
                        <div class="no-results">
                            <h3>검색 결과가 없습니다</h3>
                            <p>${searchTypeText}에서 "${searchInput.value}"에 대한 검색 결과가 없습니다.</p>
                        </div>`;
                } else {
                    galleryGrid.style.display = 'grid';
                    document.getElementById('resultInfo').textContent =
                        `${searchTypeText}에서 "${searchInput.value}" 검색 결과: ${filteredItems.length}개`;
                }
            }

            currentPage = 1;
            updatePagination();
            showPage(1, false);
        }

        function highlightSearchTerm(term) {
            if (!term) return;

            filteredItems.forEach(item => {
                const titleElement = item.querySelector('.gallery-title');
                const originalText = titleElement.textContent;
                const regex = new RegExp(`(${term})`, 'gi');
                titleElement.innerHTML = originalText.replace(regex, '<span class="highlight">$1</span>');
            });
        }

        function handleSearch(event) {
            if (event.key === 'Enter') {
                performSearch();
            }
        }

        function showPage(page, shouldScroll = true) {
            currentPage = page;

            // 모든 아이템 숨기기
            allItems.forEach(item => {
                item.style.display = 'none';
            });

            const start = (page - 1) * itemsPerPage;
            const end = start + itemsPerPage;
            const itemsToShow = filteredItems.slice(start, end);

            // 선택된 아이템만 표시
            itemsToShow.forEach((item, index) => {
                item.style.display = 'flex';
                item.style.animation = `fadeIn 0.3s ease ${index * 0.05}s both`;
            });

            if (shouldScroll) {
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }

            updatePagination();
        }

        function updatePagination() {
            const totalPages = Math.ceil(filteredItems.length / itemsPerPage);
            const paginationButtons = document.getElementById('pagination');
            const pageInfo = document.getElementById('pageInfo');

            paginationButtons.innerHTML = '';
            pageInfo.textContent = '';

            // 검색 결과가 없으면 페이징 숨김(추가됨)
            if (filteredItems.length === 0) {
                document.querySelector('.pagination').style.display = 'none';
                return;
            } else {
                document.querySelector('.pagination').style.display = 'flex';
            }

            // 이전 버튼
            const prevBtn = document.createElement('button');
            prevBtn.textContent = '이전';
            prevBtn.disabled = currentPage === 1;
            prevBtn.onclick = () => {
                if (currentPage > 1) {
                    showPage(currentPage - 1, true);
                }
            };
            paginationButtons.appendChild(prevBtn);

            // 페이지 번호 버튼
            const startPage = Math.max(1, currentPage - 2);
            const endPage = Math.min(totalPages, startPage + 4);

            if (startPage > 1) {
                const firstBtn = document.createElement('button');
                firstBtn.textContent = '1';
                firstBtn.onclick = () => showPage(1, true);
                paginationButtons.appendChild(firstBtn);

                if (startPage > 2) {
                    const dots = document.createElement('span');
                    dots.textContent = '...';
                    dots.className = 'page-dots';
                    paginationButtons.appendChild(dots);
                }
            }

            for (let i = startPage; i <= endPage; i++) {
                const pageBtn = document.createElement('button');
                pageBtn.textContent = i;
                if (i === currentPage) pageBtn.classList.add('active');
                pageBtn.onclick = () => showPage(i, true);
                paginationButtons.appendChild(pageBtn);
            }

            if (endPage < totalPages) {
                if (endPage < totalPages - 1) {
                    const dots = document.createElement('span');
                    dots.textContent = '...';
                    dots.className = 'page-dots';
                    paginationButtons.appendChild(dots);
                }

                const lastBtn = document.createElement('button');
                lastBtn.textContent = totalPages;
                lastBtn.onclick = () => showPage(totalPages, true);
                paginationButtons.appendChild(lastBtn);
            }

            // 다음 버튼
            const nextBtn = document.createElement('button');
            nextBtn.textContent = '다음';
            nextBtn.disabled = currentPage === totalPages;
            nextBtn.onclick = () => {
                if (currentPage < totalPages) {
                    showPage(currentPage + 1, true);
                }
            };
            paginationButtons.appendChild(nextBtn);

            // 페이지 정보 표시
            pageInfo.textContent = `페이지 ${currentPage} / ${totalPages}`;
        }

        // 페이지 로드 시 초기화
        window.onload = initializeGallery;

    </script>

</body>

</html>